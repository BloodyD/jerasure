package de.uni_postdam.hpi.tests.matrix;

import static org.junit.Assert.*;

import org.junit.Test;

import de.uni_postdam.hpi.matrix.Schedule;
import de.uni_postdam.hpi.matrix.Schedule.OPERATION;

public class ScheduleTest {

	@Test
	public void test_copy() {
		int w = 4;
		int packetSize = 4;
		Schedule sched = new Schedule(OPERATION.COPY, 0, 1, 3, 1);
		
		byte[] in = {
				// k_1
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x26, 0x27, 0x1e,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_2
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_3
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// m_1
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
			};
		
		byte[] out = sched.operate(in, packetSize, w);
		byte[] should = {
				// k_1
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x26, 0x27, 0x1e,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_2
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_3
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// m_1
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x26, 0x27, 0x1e,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
		};
		
		assertArrayEquals(should, out);
	}
	
	@Test
	public void test_xor() {
		int w = 4;
		int packetSize = 4;
		Schedule sched = new Schedule(OPERATION.XOR, 0, 1, 3, 1);
		
		byte[] in = {
				// k_1
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x26, 0x27, 0x1e,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_2
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_3
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// m_1
				0x00, 0x00, 0x00, 0x00,
				0x52, (byte) 0xf6, 0x09, (byte) 0x85,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
			};
		
		byte[] out = sched.operate(in, packetSize, w);
		byte[] should = {
				// k_1
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x26, 0x27, 0x1e,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_2
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// k_3
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
				
				// m_1
				0x00, 0x00, 0x00, 0x00,
				0x52, (byte)0xd0, 0x2e, (byte)0x9b,
				0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,
		};
		
		assertArrayEquals(should, out);
	}

}
